set T := 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23;
set S := s1 s2 s3;
set F := f1 f2;

param deltaT := 1;
param T_ref := 22;

param T_actual :=
1 0 20  1 1 19  1 2 18  1 3 17  1 4 17  1 5 18  
1 6 20  1 7 23  1 8 25  1 9 27 1 10 28 1 11 29  
1 12 28 1 13 26 1 14 24 1 15 22 1 16 21 1 17 20  
1 18 19 1 19 18 1 20 17 1 21 16 1 22 15 1 23 14

2 0 22  2 1 21  2 2 20  2 3 19  2 4 18  2 5 19  
2 6 21  2 7 24  2 8 26  2 9 28 2 10 30 2 11 31  
2 12 30 2 13 28 2 14 26 2 15 24 2 16 23 2 17 22  
2 18 21 2 19 20 2 20 19 2 21 18 2 22 17 2 23 16

3 0 24  3 1 23  3 2 22  3 3 21  3 4 20  3 5 21  
3 6 23  3 7 26  3 8 28  3 9 30 3 10 32 3 11 33  
3 12 32 3 13 30 3 14 28 3 15 26 3 16 25 3 17 24  
3 18 23 3 19 22 3 20 21 3 21 20 3 22 19 3 23 18;

param N :=
# W=1
1 s1 'HVAC' 2   1 s1 'WM' 1   1 s1 'DW' 1
1 s2 'HVAC' 3   1 s2 'WM' 2   1 s2 'DW' 1
1 s3 'HVAC' 2   1 s3 'WM' 1   1 s3 'DW' 2

# W=2
2 s1 'HVAC' 3   2 s1 'WM' 2   2 s1 'DW' 2
2 s2 'HVAC' 2   2 s2 'WM' 1   2 s2 'DW' 1
2 s3 'HVAC' 4   2 s3 'WM' 3   2 s3 'DW' 2

# W=3
3 s1 'HVAC' 2   3 s1 'WM' 1   3 s1 'DW' 3
3 s2 'HVAC' 3   3 s2 'WM' 2   3 s2 'DW' 1
3 s3 'HVAC' 4   3 s3 'WM' 2   3 s3 'DW' 2;

param eta_ESS_charge :=
1 0.9
2 0.9
3 0.9;

param ESS_charge_rate :=
1 0.6
2 0.6
3 0.6;

param ESS_discharge_rate :=
1 0.6
2 0.6
3 0.6;

param SOC_ESS_initial :=
1 2.4
2 1.8
3 3.0;

param SOC_ESS_max :=
1 3.0
2 3.0
3 3.0;

param SOC_ESS_min :=
1 1.2
2 1.2
3 1.2;

param eta_EV_charge :=
1 0.9
2 0.9
3 0.9;

param eta_EV_discharge :=
1 0.9
2 0.9
3 0.9;

param EV_charge_rate :=
1 0.6
2 0.6
3 0.6;

param EV_discharge_rate :=
1 0.6
2 0.6
3 0.6;

param SOC_EV_initial :=
1 2.0
2 1.5
3 2.5;

param SOC_EV_max :=
1 4.0
2 4.0
3 4.0;

param SOC_EV_min :=
1 0.8
2 0.8
3 0.8;

param EV_arrival :=
1 18
2 16
3 20;

param EV_departure :=
1 8
2 6
3 10;

# ================== 光伏功率 ==================
param P_PV :=
# [严格限定光伏发电时段为8:00-17:00（对应t=8到t=17）]
# W=1 (VPP 1)
1 0 0.0   1 1 0.0    1 2 0.0    1 3 0.0    1 4 0.0    1 5 0.0    1 6 0.0    1 7 0.0
1 8 10.0  1 9 10.0   1 10 13.0  1 11 14.0 1 12 20.0 1 13 20.0  1 14 18.0
1 15 15.0 1 16 8.0   1 17 9.0   1 18 0.0   1 19 0.0   1 20 0.0   1 21 0.0
1 22 0.0  1 23 0.0

# W=2 (VPP 2)
2 0 0.0   2 1 0.0    2 2 0.0    2 3 0.0    2 4 0.0    2 5 0.0    2 6 0.0    2 7 0.0
2 8 10.0  2 9 10.0   2 10 13.0  2 11 14.0 2 12 20.0 2 13 20.0  2 14 18.0
2 15 15.0 2 16 8.0   2 17 9.0   2 18 0.0   2 19 0.0   2 20 0.0   2 21 0.0
2 22 0.0  2 23 0.0

# W=3 (VPP 3)
3 0 0.0   3 1 0.0    3 2 0.0    3 3 0.0    3 4 0.0    3 5 0.0    3 6 0.0    3 7 0.0
3 8 10.0  3 9 10.0   3 10 13.0  3 11 14.0 3 12 20.0 3 13 20.0  3 14 18.0
3 15 15.0 3 16 8.0   3 17 9.0   3 18 0.0   3 19 0.0   3 20 0.0   3 21 0.0
3 22 0.0  3 23 0.0;

param InfLoad :=
1 0 17.0   1 1 17.0    1 2 18.0    1 3 20.0    1 4 17.0
1 5 17.0   1 6 37.0   1 7 26.0   1 8 22.0   1 9 40.0
1 10 48.0  1 11 54.0  1 12 38.0  1 13 28.0  1 14 28.0
1 15 28.0  1 16 41.0  1 17 49.0  1 18 55.0  1 19 38.0
1 20 39.0  1 21 31.0  1 22 21.0  1 23 21.0

2 0 17.0    2 1 17.0    2 2 18.0    2 3 20.0    2 4 17.0
2 5 17.0   2 6 37.0   2 7 26.0   2 8 22.0   2 9 40.0
2 10 48.0  2 11 54.0  2 12 38.0  2 13 28.0  2 14 28.0
2 15 28.0  2 16 41.0  2 17 49.0  2 18 55.0  2 19 38.0
2 20 39.0  2 21 31.0  2 22 21.0  2 23 21.0

3 0 17.0   3 1 17.0   3 2 18.0   3 3 20.0   3 4 17.0
3 5 17.0   3 6 37.0   3 7 26.0   3 8 22.0   3 9 40.0
3 10 48.0  3 11 54.0  3 12 38.0  3 13 28.0  3 14 28.0
3 15 28.0  3 16 41.0  3 17 49.0  3 18 55.0  3 19 38.0
3 20 39.0  3 21 31.0  3 22 21.0  3 23 21.0;

param energy_price_buy :=
0 100   1 120   2 110   3 105   4 130   5 140   6 150   7 160
8 140   9 130  10 120  11 110  12 100  13 95   14 90   15 85
16 100  17 120  18 140  19 160  20 150  21 130  22 110  23 100;

param energy_price_sell :=
0 80    1 90    2 85    3 75    4 95    5 105   6 115   7 125
8 110   9 100  10 90   11 80   12 70   13 65   14 60   15 55
16 70   17 80   18 90   19 100  20 90   21 80   22 70   23 60;

param phase_duration :=
1 'HVAC' f1 2   1 'HVAC' f2 3
1 'WM'   f1 1   1 'WM'   f2 2
1 'DW'   f1 2   1 'DW'   f2 1

2 'HVAC' f1 3   2 'HVAC' f2 2
2 'WM'   f1 1   2 'WM'   f2 1
2 'DW'   f1 2   2 'DW'   f2 1

3 'HVAC' f1 2   3 'HVAC' f2 4
3 'WM'   f1 1   3 'WM'   f2 3
3 'DW'   f1 3   3 'DW'   f2 2;

param P_consumption :=
1 'HVAC' f1 1.5   1 'HVAC' f2 2.0
1 'WM'   f1 0.8   1 'WM'   f2 1.2
1 'DW'   f1 1.0   1 'DW'   f2 0.5

2 'HVAC' f1 2.0   2 'HVAC' f2 2.5
2 'WM'   f1 1.0   2 'WM'   f2 1.5
2 'DW'   f1 1.2   2 'DW'   f2 0.6

3 'HVAC' f1 2.5   3 'HVAC' f2 3.0
3 'WM'   f1 1.5   3 'WM'   f2 2.0
3 'DW'   f1 1.8   3 'DW'   f2 1.0;