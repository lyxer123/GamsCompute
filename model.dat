set T := 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24;
set S := s1 s2 s3;
set F := f1 f2;

param deltaT := 1;
param T_ref := 22;

param T_actual :=
1 1 20  1 2 19  1 3 18  1 4 17  1 5 17  1 6 18  
1 7 20  1 8 23  1 9 25  1 10 27 1 11 28 1 12 29  
1 13 28 1 14 26 1 15 24 1 16 22 1 17 21 1 18 20  
1 19 19 1 20 18 1 21 17 1 22 16 1 23 15 1 24 14

2 1 20  2 2 19  2 3 18  2 4 17  2 5 17  2 6 18  
2 7 20  2 8 23  2 9 25  2 10 27 2 11 28 2 12 29  
2 13 28 2 14 26 2 15 24 2 16 22 2 17 21 2 18 20  
2 19 19 2 20 18 2 21 17 2 22 16 2 23 15 2 24 14

3 1 20  3 2 19  3 3 18  3 4 17  3 5 17  3 6 18  
3 7 20  3 8 23  3 9 25  3 10 27 3 11 28 3 12 29  
3 13 28 3 14 26 3 15 24 3 16 22 3 17 21 3 18 20  
3 19 19 3 20 18 3 21 17 3 22 16 3 23 15 3 24 14;

param N :=
# W=1
1 s1 'HVAC' 2   1 s1 'WM' 1   1 s1 'DW' 1
1 s2 'HVAC' 3   1 s2 'WM' 2   1 s2 'DW' 1
1 s3 'HVAC' 2   1 s3 'WM' 1   1 s3 'DW' 2

# W=2 (与W=1相同)
2 s1 'HVAC' 2   2 s1 'WM' 1   2 s1 'DW' 1
2 s2 'HVAC' 3   2 s2 'WM' 2   2 s2 'DW' 1
2 s3 'HVAC' 2   2 s3 'WM' 1   2 s3 'DW' 2

# W=3 (与W=1相同)
3 s1 'HVAC' 2   3 s1 'WM' 1   3 s1 'DW' 1
3 s2 'HVAC' 3   3 s2 'WM' 2   3 s2 'DW' 1
3 s3 'HVAC' 2   3 s3 'WM' 1   3 s3 'DW' 2;

param eta_ESS_charge :=
1 0.9
2 0.9
3 0.9;

param ESS_charge_rate :=
1 0.6
2 0.6
3 0.6;

param ESS_discharge_rate :=
1 0.6
2 0.6
3 0.6;

param SOC_ESS_initial :=
1 2.4
2 2.4
3 2.4;

param SOC_ESS_max :=
1 3.0
2 3.0
3 3.0;

param SOC_ESS_min :=
1 1.2
2 1.2
3 1.2;

param eta_EV_charge :=
1 0.9
2 0.9
3 0.9;

param eta_EV_discharge :=
1 0.9
2 0.9
3 0.9;

param EV_charge_rate :=
1 0.6
2 0.6
3 0.6;

param EV_discharge_rate :=
1 0.6
2 0.6
3 0.6;

param SOC_EV_initial :=
1 2.0
2 2.0
3 2.0;

param SOC_EV_max :=
1 4.0
2 4.0
3 4.0;

param SOC_EV_min :=
1 0.8
2 0.8
3 0.8;

param EV_arrival :=
1 18
2 18
3 18;

param EV_departure :=
1 8
2 8
3 8;

# ================== 光伏功率 ==================
param P_PV :=
# W=1 (VPP 1)
1 1 0.0   1 2 0.0    1 3 0.0    1 4 0.0    1 5 0.0    1 6 0.0    1 7 0.0
1 8 0.0   1 9 10.0   1 10 10.0  1 11 13.0 1 12 14.0 1 13 20.0  1 14 20.0
1 15 18.0 1 16 15.0  1 17 8.0   1 18 9.0   1 19 0.0   1 20 0.0   1 21 0.0
1 22 0.0  1 23 0.0   1 24 0.0

# W=2 (与W=1相同)
2 1 0.0   2 2 0.0    2 3 0.0    2 4 0.0    2 5 0.0    2 6 0.0    2 7 0.0
2 8 0.0   2 9 10.0   2 10 10.0  2 11 13.0 2 12 14.0 2 13 20.0  2 14 20.0
2 15 18.0 2 16 15.0  2 17 8.0   2 18 9.0   2 19 0.0   2 20 0.0   2 21 0.0
2 22 0.0  2 23 0.0   2 24 0.0

# W=3 (与W=1相同)
3 1 0.0   3 2 0.0    3 3 0.0    3 4 0.0    3 5 0.0    3 6 0.0    3 7 0.0
3 8 0.0   3 9 10.0   3 10 10.0  3 11 13.0 3 12 14.0 3 13 20.0  3 14 20.0
3 15 18.0 3 16 15.0  3 17 8.0   3 18 9.0   3 19 0.0   3 20 0.0   3 21 0.0
3 22 0.0  3 23 0.0   3 24 0.0;

param InfLoad :=
1 1 17.0   1 2 17.0    1 3 18.0    1 4 20.0    1 5 17.0
1 6 17.0   1 7 37.0    1 8 26.0    1 9 22.0    1 10 40.0
1 11 48.0  1 12 54.0   1 13 38.0   1 14 28.0   1 15 28.0
1 16 28.0  1 17 41.0   1 18 49.0   1 19 55.0   1 20 38.0
1 21 39.0  1 22 31.0   1 23 21.0   1 24 21.0

2 1 17.0   2 2 17.0    2 3 18.0    2 4 20.0    2 5 17.0
2 6 17.0   2 7 37.0    2 8 26.0    2 9 22.0    2 10 40.0
2 11 48.0  2 12 54.0   2 13 38.0   2 14 28.0   2 15 28.0
2 16 28.0  2 17 41.0   2 18 49.0   2 19 55.0   2 20 38.0
2 21 39.0  2 22 31.0   2 23 21.0   2 24 21.0

3 1 17.0   3 2 17.0    3 3 18.0    3 4 20.0    3 5 17.0
3 6 17.0   3 7 37.0    3 8 26.0    3 9 22.0    3 10 40.0
3 11 48.0  3 12 54.0   3 13 38.0   3 14 28.0   3 15 28.0
3 16 28.0  3 17 41.0   3 18 49.0   3 19 55.0   3 20 38.0
3 21 39.0  3 22 31.0   3 23 21.0   3 24 21.0;

param energy_price_buy :=
1 100   2 120   3 110   4 105   5 130   6 140   7 150   8 160
9 140   10 130  11 120  12 110  13 100  14 95   15 90   16 85
17 100  18 120  19 140  20 160  21 150  22 130  23 110  24 100;

param energy_price_sell :=
1 80    2 90    3 85    4 75    5 95    6 105   7 115   8 125
9 110   10 100  11 90   12 80   13 70   14 65   15 60   16 55
17 70   18 80   19 90   20 100  21 90   22 80   23 70   24 60;

param phase_duration :=
1 'HVAC' f1 2   1 'HVAC' f2 3
1 'WM'   f1 1   1 'WM'   f2 2
1 'DW'   f1 2   1 'DW'   f2 1

2 'HVAC' f1 2   2 'HVAC' f2 3
2 'WM'   f1 1   2 'WM'   f2 2
2 'DW'   f1 2   2 'DW'   f2 1

3 'HVAC' f1 2   3 'HVAC' f2 3
3 'WM'   f1 1   3 'WM'   f2 2
3 'DW'   f1 2   3 'DW'   f2 1;

param P_consumption :=
1 'HVAC' f1 1.5   1 'HVAC' f2 2.0
1 'WM'   f1 0.8   1 'WM'   f2 1.2
1 'DW'   f1 1.0   1 'DW'   f2 0.5

2 'HVAC' f1 1.5   2 'HVAC' f2 2.0
2 'WM'   f1 0.8   2 'WM'   f2 1.2
2 'DW'   f1 1.0   2 'DW'   f2 0.5

3 'HVAC' f1 1.5   3 'HVAC' f2 2.0
3 'WM'   f1 0.8   3 'WM'   f2 1.2
3 'DW'   f1 1.0   3 'DW'   f2 0.5;